<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0/EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.solvd.school.mybatis.mappers.ScheduleGenerationLogMapper">
  <resultMap id="GenLogResult" type="com.solvd.school.models.ScheduleGenerationLog">
    <id property="id" column="id"/>
    <result property="generationDate" column="generation_date"/>
    <result property="status" column="status"/>
    <result property="generationsExecuted" column="generations_executed"/>
    <result property="bestFitnessScore" column="best_fitness_score"/>
    <result property="algorithmParamsId" column="algorithm_params_id"/>
    <result property="message" column="message"/>
  </resultMap>

  <select id="getById" parameterType="int" resultMap="GenLogResult">
    SELECT id, generation_date, status, generations_executed, best_fitness_score, algorithm_params_id, message
    FROM schedule_generation_log WHERE id = #{id}
  </select>

  <insert id="insert" parameterType="com.solvd.school.models.ScheduleGenerationLog" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
    INSERT INTO schedule_generation_log
    (generation_date, status, generations_executed, best_fitness_score, algorithm_params_id, message)
    VALUES (#{generationDate}, #{status}, #{generationsExecuted}, #{bestFitnessScore},
            #{algorithmParamsId, jdbcType=INTEGER}, #{message})
  </insert>

  <update id="update" parameterType="com.solvd.school.models.ScheduleGenerationLog">
    UPDATE schedule_generation_log
    SET status = #{status},
        generations_executed = #{generationsExecuted},
        best_fitness_score = #{bestFitnessScore},
        algorithm_params_id = #{algorithmParamsId, jdbcType=INTEGER},
        message = #{message}
    WHERE id = #{id}
  </update>

  <delete id="delete" parameterType="int">
    DELETE FROM schedule_generation_log WHERE id = #{id}
  </delete>
</mapper>
