<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0/EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.solvd.school.dao.interfaces.ISpecialClassroomsDAO">
    <resultMap id="SpecialClassroomResult" type="com.solvd.school.model.SpecialClassroom">
        <id property="id" column="id"/>
        <result property="subjectId" column="subject_id"/>
        <result property="classroomId" column="classroom_id"/>
    </resultMap>

    <select id="getById" parameterType="int" resultMap="SpecialClassroomResult">
        SELECT id, subject_id, classroom_id FROM special_classrooms WHERE id = #{id}
    </select>

    <select id="getBySubjectId" parameterType="int" resultMap="SpecialClassroomResult">
        SELECT id, subject_id, classroom_id FROM special_classrooms WHERE subject_id = #{subjectId}
    </select>

    <insert id="insert" parameterType="com.solvd.school.model.SpecialClassroom" useGeneratedKeys="true"
            keyProperty="id" keyColumn="id">
        INSERT INTO special_classrooms (subject_id, classroom_id)
        VALUES (#{subjectId}, #{classroomId})
    </insert>

    <delete id="delete" parameterType="int">
        DELETE FROM special_classrooms WHERE id = #{id}
    </delete>

    <select id="getClassroomIdBySubjectId" parameterType="int" resultType="int">
        SELECT classroom_id 
        FROM special_classrooms 
        WHERE subject_id = #{subjectId}
        LIMIT 1
    </select>

</mapper>
